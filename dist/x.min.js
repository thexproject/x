(()=>{class e{constructor(t){t instanceof Node?this.node=t:t instanceof e?this.node=t.node:t.startsWith("<")?((t=t.substring(1)).endsWith(">")&&(t=t.substring(0,t.length-1)),(t=t.trim()).endsWith("/")&&(t=t.substring(0,t.length-1)),t=t.trim(),this.node=document.createElement(t)):this.node=document.querySelector(t),this.node.listeners=void 0===this.node.listeners?[]:this.node.listeners}value(e){return void 0===e?this.node.value:(this.node.value=e,this)}text(e){return void 0===e?this.node.textContent:(this.node.textContent=e,this)}html(e){return void 0===e?this.node.innerHTML:(this.node.innerHTML=e,this)}append(t){let n;if(t instanceof Node)n=t;else if(t instanceof e)n=t.node;else{let e=document.createElement("template");e.innerHTML=t.trim(),n=e.content.firstChild}return this.node.appendChild(n),new e(n)}prepend(t){let n;if(t instanceof Node)n=t;else if(t instanceof e)n=t.node;else{let e=document.createElement("template");e.innerHTML=t.trim(),n=e.content.firstChild}return this.node.insertBefore(n,this.node.firstChild),new e(n)}appendTo(t){return new e(t).append(this.node),this}prependTo(t){return new e(t).prepend(this.node),this}classes(e){return void 0===e?this.node.className.split(" "):(this.node.className=e.join(" "),this)}addClass(e){return this.node.className+=" ",this.node.className+=e,this}id(e){return void 0===e?this.node.id:(this.node.id=e,this)}style(e,t){return void 0===e?this.node.style:void 0===t?this.node.style[e]:(this.node.style[e]=t,this)}destroy(){this.node.parentNode.removeChild(this.node)}on(e,t,n){return this.node.listeners[t]=(e=>{t(e,n)}),this.node.addEventListener(e,this.node.listeners[t],!1),this}rmOn(e,t){return this.node.removeEventListener(e,this.node.listeners[t],!1),this}handle(e,t,n,i){return this.node.addEventListener(e,e=>{e.preventDefault(),n(i)},{passive:!0,capture:!0}),this.node.addEventListener(t,e=>{e.preventDefault(),n(i)},{passive:!0,capture:!0}),this}click(e,t){return void 0===e?this.node.click():this.handle("touchend","click",e,t),this}hover(e,t){return void 0===e?this.node.click():this.handle("touchstart","mouseover",e,t),this}leave(e,t){return void 0===e?this.node.click():this.handle("","mouseleave",e,t),this}find(t){return new e(this.node.querySelector(t))}parent(){return new e(this.node.parentNode)}}window.x=(t=>new e(t)),window.xAct=((t,n)=>{let i=new e(t).html();i=new e("<textarea>").html(i).value();const s=/<<([^>>]+)?>>/g,r=/(^( )*(if|for|else|switch|case|break|var|let|const|{|}))(.*)?/g;let o,d="var list = [];\n",h=0;const l=(e,t)=>{return d+=t?e.match(r)||(e=>{if(!e.includes("="))return!1;const t=/"|'|`/;let n=!1,i="="!==e[0],s="",r=0;for(let o of e){let d=0===r?o:e[r-1];if(t.test(o)&&"\\"!==d&&(n?o===s&&(n=!1):(n=!0,s=o)),"="===o&&!n&&i)return!0;r++}return!1})(e.trim())?(e.trim().endsWith(";")?e:e+";")+"\n":`list.push(${e});\n`:""===e?"":`list.push("${e.replace(/"/g,'\\"')}");\n`,l};for(;o=s.exec(i);)l(i.slice(h,o.index))(o[1],!0),h=o.index+o[0].length;l(i.substr(h,i.length-h)),d+='return list.join("");',new e(t).html(new Function(d.replace(/[\r\t\n]/g,"")).apply(n))}),window.xJax=(async(e,t)=>{let n="";if(void 0!==t){n+="?";for(let e in t)n+=encodeURIComponent(e),n+="=",n+=encodeURIComponent(t[e]),n+="&";n=n.substring(0,n.length-1)}let i=await fetch(e+n);return await i.text()})})();